{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"
          rel="stylesheet">

    <link type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-loading-bar.css"
          rel="stylesheet">

    <link type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/5.2.5/css/bootstrap-slider.min.css"
          rel="stylesheet">


    <style>
        .body {
            background: rgb(204, 204, 204);
        }

        .maindiv {
            /*
            the content is hidden by default,
            and will be shown only after
            completed page load and
            finalized ckeditor startup
            */
            display: none;
        }

        .content-section {
            margin-bottom: 100px;
        }

        article {
            background: white;
            width: 21cm;
            height: 29.7cm;
            display: block;
            margin: 0 auto 0.5cm;
            box-shadow: 0 0 0.5cm rgba(0, 0, 0, 0.5);
        {#            padding: 30px;#} font-size: 11pt;
            line-height: 22pt;
        }

        article form {
            height: 100%;
        }

        @media print {
            body, article[size="A4"] {
                margin: 0;
                box-shadow: 0;
                background: transparent;
            }

            .cke_pagebreak {
                display: block;
                page-break-before: always;
            }

            .content-section {
                margin-bottom: 0;
                padding-top: 0;
            }

            .no-print {
                display: none;
            }

        }

        .cke_editor_cabecalho textarea {
            white-space: pre-wrap !important;
        }

        .cke_editor_cabecalho textarea.cke_source {
            white-space: pre-wrap !important;
        }

        .mynewcssclass {
            border: 1px solid rgb(183, 19, 19) !important;
            box-shadow: 0px 0px 3px rgba(228, 43, 43, 0.2) !important;
            width: 100% !important;
            height: 100% !important;
        }

        {#        .mynewcssclass div.cke_inner {#}
        {#            border: 10px solid rgb(3, 32, 183) !important;#}
        {#            box-shadow: 0px 0px 3px rgba(3, 66, 228, 0.2) !important;#}
        {#            width: 100% !important;#}
        {#            height: 100% !important;#}
        {#        }#}

        {#        html, iframe, body {#}
        {#            overflow: hidden;#}
        {#            outline: none;#}
        {#        }#}

    </style>
</head>
<body class="body">

<div class="maindiv">
    <div id="top-bar" class="navbar-fixed-top no-print">
        <div id="top-ck-toolbar">
            <!-- ckeditor top toolbar is rendered here -->
        </div>
    </div>

    <div id="content-section" class="center-block content-section">
        <article>

            <form id="myform" method="post">
{#                <textarea id="cabecalho" data-ckenable="true"></textarea>#}
{#                <textarea id="tipo_doc" data-ckenable="true"></textarea>#}
                <textarea id="conteudo" data-ckenable="true">
                    <p>
                        aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p><p>
                    a</p><p>a</p><p>a</p><p>a</p><p>a</p><p>a</p><p>a</p><p>a</p><p>a</p><p>a</p><p>a</p><p>a</p><p>
                    a</p><p>a</p>
                    <p>
                        aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
                </textarea>
{#                <textarea id="rodape" data-ckenable="true"></textarea>#}
            </form>

        </article>
    </div>

    <div id="bottom-bar" class="navbar-fixed-bottom no-print">
        <div id="bottom-ck-toolbar">
            <!-- ckeditor bottom toolbar is rendered here -->
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>

<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="{% static "django_documentos/ckeditor/4.5.5/ckeditor-source/ckeditor.js" %}"></script>
{#<script src="http://cdn.ckeditor.com/4.5.5/full-all/ckeditor.js"></script>#}

<script src="{% static "django_documentos/ckeditor/4.5.5/ckeditor-source/adapters/jquery.js" %}"></script>
{#<script src="http://cdn.ckeditor.com/4.5.5/full-all/adapters/jquery.js"></script>#}

{#<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/5.2.5/bootstrap-slider.min.js"></script>#}
{#<script src="https://cdnjs.cloudflare.com/ajax/libs/zoomooz/1.1.6/jquery.zoomooz.min.js"></script>#}

<script>

    //get the id's of elements that contains "data-ckenable" attribute
    function get_ckenable_element_ids() {
        return $("[data-ckenable]").map(function () {
            return this.id;
        }).get();
    }

    var ckenable_element_ids_list = get_ckenable_element_ids();

    var ckeditor_config = {
        extraPlugins: [
            "sharedspace",
            "autogrow",
            "zoom", //
            "richcombo", // required by zoom
            "floatpanel",// required by zoom
            "panel", // required by zoom
            "listblock", // required by zoom
            "button", // required by zoom

        ].join(),
        sharedSpaces: {
            top: "top-ck-toolbar",
            bottom: "bottom-ck-toolbar"
        },
        startupShowBorders: false,
        {#        contentsCss: 'html, iframe, body {overflow:hidden;outline: none;}'#}
        {#        contentsCss: 'body {overflow:hidden;outline: none;}'#}
        {#        contentsCss: 'body {overflow:hidden;}',#}
        width: '21cm',
        {#        readOnly: true,#}
        autoGrow_onStartup: true,
        toolbarGroups: [
            {"name": "basicstyles", "groups": ["basicstyles"]},
{#            {"name": "links", "groups": ["links"]},#}
{#            {"name": "paragraph", "groups": ["list", "blocks"]},#}
{#            {"name": "document", "groups": ["mode"]},#}
{#            {"name": "insert", "groups": ["insert"]},#}
{#            {"name": "styles", "groups": ["styles"]},#}
{#            {"name": "about", "groups": ["about"]},#}
            {"name": "zoom", "groups": ["Zoom"]}
        ],
        // Remove the redundant buttons from toolbar groups defined above.
{#        removeButtons: 'Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar',#}
        removePlugins: 'resize,maximize,backup'
    };

    //start ckeditor
    ckenable_element_ids_list.map(function (id_element) {
        CKEDITOR.replace(id_element, ckeditor_config);
        var msg = "".concat(id_element).concat(" iniciado");
        console.log(msg);
    });

    CKEDITOR.on('instanceReady', function (evt) {
        var ckeditor_first_div_id = "cke_" + evt.editor.name;
        var selector_str = "#content-section " + "#" + ckeditor_first_div_id;
        console.log('$("' + selector_str + '")');
        {#        $(selector_str).addClass("mynewcssclass");#}
        evt.editor.execCommand('autogrow');
    });


    function fix_content_padding() {
        var top_menu = $('#top-ck-toolbar');
        var content_div = $('#content-section');
        var current_top_menu_height = parseInt(top_menu.css('height').replace(/[^-\d\.]/g, ''));
        var new_padding_value_to_content = "".concat(current_top_menu_height + 130).concat("px");
        content_div.css('padding-top', new_padding_value_to_content);
    }

    window.addEventListener('resize.fix_content_padding', fix_content_padding, false);

    var paceOptions = {
        "ajax": false,
        "restartOnRequestAfter": false,
        "document": false
    };

    window.paceOptions = paceOptions;
    Pace.on('hide', function () {

        $(".maindiv").fadeIn("fast");
        fix_content_padding();
        console.log("Pace finalizado");
    });


</script>
<script>
    {#    $(document).ready(function () {#}
    {#        console.log("passou aqui");#}
    {#        $("#cke_mytextarea1").css("border", "1px solid TRANSPARENT !IMPORTANT").css("box-shadow", "0 0 0px TRANSPARENT");#}
    {##}
    {#        $.fn.scale = function (x) {#}
    {#            if (!$(this).filter(':visible').length && x != 1)return $(this);#}
    {#            if (!$(this).parent().hasClass('scaleContainer')) {#}
    {#                $(this).wrap($('<div class="scaleContainer">').css('position', 'relative'));#}
    {#                $(this).data({#}
    {#                    'originalWidth': $(this).width(),#}
    {#                    'originalHeight': $(this).height()#}
    {#                });#}
    {#            }#}
    {#            $(this).css({#}
    {#                'transform': 'scale(' + x + ')',#}
    {#                '-ms-transform': 'scale(' + x + ')',#}
    {#                '-moz-transform': 'scale(' + x + ')',#}
    {#                '-webkit-transform': 'scale(' + x + ')',#}
    {#                'transform-origin': 'right bottom',#}
    {#                '-ms-transform-origin': 'right bottom',#}
    {#                '-moz-transform-origin': 'right bottom',#}
    {#                '-webkit-transform-origin': 'right bottom',#}
    {#                'position': 'absolute',#}
    {#                'bottom': '0',#}
    {#                'right': '0',#}
    {#            });#}
    {#            if (x == 1)#}
    {#                $(this).unwrap().css('position', 'static'); else#}
    {#                $(this).parent()#}
    {#                        .width($(this).data('originalWidth') * x)#}
    {#                        .height($(this).data('originalHeight') * x);#}
    {#            return $(this);#}
    {#        };#}
    {##}
    {#    });#}
</script>
</body>
</html>