/*
 Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){function i(a){function l(){e=a.document;m=e[CKEDITOR.env.ie?"getBody":"getDocumentElement"]();d=CKEDITOR.env.quirks?e.getBody():e.getDocumentElement();g=CKEDITOR.dom.element.createFromHtml('<span style="margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;">'+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",e)}function c(){j&&d.setStyle("overflow-y","hidden");var h=a.window.getViewPaneSize().height,b;m.append(g);b=g.getDocumentPosition(e).y+g.$.offsetHeight;g.remove();
var f=a.document.getBody(),c;if(CKEDITOR.env.gecko&&(c=f.$.style.MozTransform))f=/[0-9]*\.?[0-9]+/g,b*=f.exec(c);else if(CKEDITOR.env.webkit&&(c=f.$.style.WebkitTransform))f=/[0-9]*\.?[0-9]+/g,b*=f.exec(c);b+=i;b=Math.max(b,p);b=Math.min(b,n);b!=h&&k!=b&&(b=a.fire("autoGrow",{currentHeight:h,newHeight:b}).newHeight,a.resize(a.container.getStyle("width"),b,!0),k=b);j||(b<n&&d.$.scrollHeight>d.$.clientHeight?d.setStyle("overflow-y","hidden"):d.removeStyle("overflow-y"))}var k,e,m,d,g,i=a.config.autoGrow_bottomSpace||
0,p=void 0!=a.config.autoGrow_minHeight?a.config.autoGrow_minHeight:200,n=a.config.autoGrow_maxHeight||Infinity,j=!a.config.autoGrow_maxHeight;a.addCommand("autogrow",{exec:c,modes:{wysiwyg:1},readOnly:1,canUndo:!1,editorFocus:!1});var q={contentDom:1,afterZoom:1,selectionChange:1,insertElement:1,mode:1},o;for(o in q)a.on(o,function(h){"wysiwyg"==h.editor.mode&&setTimeout(function(){var b=a.getCommand("maximize");!a.window||b&&b.state==CKEDITOR.TRISTATE_ON?k=null:(c(),j||c())},100)});a.on("afterCommandExec",
function(a){"maximize"==a.data.name&&"wysiwyg"==a.editor.mode&&(a.data.command.state==CKEDITOR.TRISTATE_ON?d.removeStyle("overflow-y"):c())});a.on("contentDom",l);l();a.config.autoGrow_onStartup&&a.execCommand("autogrow")}CKEDITOR.plugins.add("autogrow",{init:function(a){if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE)a.on("instanceReady",function(){a.editable().isInline()?a.ui.space("contents").setStyle("height","auto"):i(a)})}})})();